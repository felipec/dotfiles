#!/bin/bash

readarray -t files < <(git ls-files)

for f in "${files[@]}"; do
  [[ "$f" == tools/* ]] && continue
  if [[ -e ~/"$f" ]]
  then
    cmp -s {.,~}/"$f" || vimdiff {.,~}/"$f"
  else
    mkdir -p $(dirname ~/"$f") &&
    cp -av ./"$f" ~/"$f"
  fi
done

# extra

test -f ~/.git-prompt.sh || wget -O ~/.git-prompt.sh \
	'http://git.kernel.org/?p=git/git.git;a=blob_plain;f=contrib/completion/git-prompt.sh'

chmod go-rw ~/.msmtprc
